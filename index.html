<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>AFT ‚Äì Aoi FOP Tax</title>
    <meta property="og:title" content="AFT ‚Äì –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–¥–∞—Ç–∫—ñ–≤ –§–û–ü">
    <meta property="og:description" content="–®–≤–∏–¥–∫–æ —Ä–æ–∑—Ä–∞—Ö—É–π—Ç–µ –Ñ–ü, –í–ó —Ç–∞ –Ñ–°–í –¥–ª—è –§–û–ü">
    <meta property="og:image" content="https://aft.itworldit.com/logo.png">
    <meta property="og:url" content="https://aft.itworldit.com/">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background: linear-gradient(to right top, #e3f2fd, #e8f5e9);
            font-family: 'Segoe UI', sans-serif;
            color: #333;
            padding: 2rem;
            max-width: 600px;
            margin: auto;
            border-radius: 1rem;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2e7d32;
        }
        label, select, input {
            display: block;
            width: 100%;
            margin-top: 1rem;
            font-size: 1.1rem;
        }
        .result {
            margin-top: 2rem;
            background-color: #f1f8e9;
            padding: 1rem;
            border-radius: 0.5rem;
        }
        .footer {
            text-align: center;
            margin-top: 2rem;
            font-size: 0.9rem;
            color: #777;
        }
        .fade-block {
          opacity: 0;
          transform: translateY(10px);
          transition: opacity 1s ease, transform 1s ease;
        }

        .fade-in {
          opacity: 1 !important;
          transform: translateY(0) !important;
        }

    </style>
</head>
<body oncontextmenu="return false" onselectstart="return false" ondragstart="return false">
    <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1.5rem;" class="fade-block delay-0">
      <img src="logo.png" alt="AFT by Aoi" style="width: 80px; height: auto;">
      <div>
        <h1 style="margin: 0; color: #2e7d32;">Aoi FOP Tax</h1>
        <p style="margin: 0; font-style: italic; font-size: 1rem; color: #4caf50;">by Aoi üå∏</p>
      </div>
    </div>
    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;" class="fade-block delay-1">
      <img src="aoi-business.png" alt="Aoi avatar" style="width: 100px; border-radius: 1rem; box-shadow: 0 0 8px rgba(0,0,0,0.1);">
      <p style="margin: 0; font-style: italic; font-size: 1rem; color: #4caf50;">–Ø –∑ —Ç–æ–±–æ—é, —Å–µ–Ω–ø–∞–π~ –î–∞–≤–∞–π —Ä–∞—Ö—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ üíö</p>
    </div>
    
    <div style="text-align: right; margin-bottom: 1rem;">
      <a href="about.html" style="color: #4caf50; text-decoration: underline; font-size: 0.95rem;">–ü—Ä–æ –ø—Ä–æ—î–∫—Ç AFT</a>
    </div>

    <label for="fopType">–¢–∏–ø –§–û–ü:</label>
      <select id="fopType">
       <option value="3_–±–µ–∑_–ü–î–í">–§–û–ü 3 –≥—Ä—É–ø–∞ (5%) –±–µ–∑ –ü–î–í</option>
       <option value="3_–∑_–ü–î–í">–§–û–ü 3 –≥—Ä—É–ø–∞ (3%) –∑ –ü–î–í</option>
       <option value="2">–§–û–ü 2 –≥—Ä—É–ø–∞ (–Ñ–ü —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π)</option>
       <option value="1">–§–û–ü 1 –≥—Ä—É–ø–∞ (–Ñ–ü —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π)</option>
      </select>

<div id="fopInfo" style="font-size: 0.9rem; color: #555; margin-top: 0.5rem;"></div>

    <label for="income">–°—É–º–∞ –¥–æ—Ö–æ–¥—É\–ø—Ä–∏–±—É—Ç–∫—É –≤ –≥—Ä–Ω (—á–∏—Å—Ç–æ–≥–æ –Ω–µ –æ–ø–æ–¥–∞—Ç–∫–æ–≤–∞–Ω–æ–≥–æ):</label>
    <input type="text" id="income" placeholder="–í–≤–µ–¥—ñ—Ç—å –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É –∞–±–æ –¥–æ—Ö–æ–¥–∏ —á–µ—Ä–µ–∑ –ø–ª—é—Å..." />

    <label for="period">–ü–µ—Ä—ñ–æ–¥:</label>
    <select id="period">
        <option value="1">1 –º—ñ—Å—è—Ü—å</option>
        <option value="3">–ö–≤–∞—Ä—Ç–∞–ª (3 –º—ñ—Å)</option>
        <option value="6">–ü—ñ–≤ —Ä–æ–∫—É (6 –º—ñ—Å)</option>
        <option value="9">9 –º—ñ—Å—è—Ü—ñ–≤</option>
        <option value="12">–†—ñ–∫ (12 –º—ñ—Å)</option>
    </select>

    <div class="result fade-block delay-2" id="result">
        üßæ –¢—É—Ç –∑ º—è–≤–ª—è—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–¥–∞—Ç–∫—ñ–≤.
    </div>
        <div style="text-align:center; margin-top: 1rem;">
            <a href="https://cabinet.tax.gov.ua/login" target="_blank" style="
            background-color: #4caf50;
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 0.5rem;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.15);
            transition: background-color 0.3s ease;
            "
            onmouseover="this.style.backgroundColor='#388e3c'"
            onmouseout="this.style.backgroundColor='#4caf50'">
            –ö–∞–±—ñ–Ω–µ—Ç –ø–ª–∞—Ç–Ω–∏–∫–∞ –ø–æ–¥–∞—Ç–∫—ñ–≤ üîê
            </a>
        </div>

        <div style="text-align: center; margin-top: 1rem;">
        <button onclick="toggleCalendar()" style="padding: 0.6rem 1.2rem; background-color: #2e7d32; color: white; border: none; border-radius: 0.5rem; font-weight: bold; cursor: pointer;">
        üìÖ –ü–æ–∫–∞–∑–∞—Ç–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä –ø–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ø–æ–¥—ñ–π
        </button>
        </div>
        <div id="calendarBlock" class="fade-block" style="display: none; margin-top: 1.5rem; background: #f9fbe7; padding: 1rem; border-radius: 0.5rem; font-size: 0.9rem;">
        <strong>–ü–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä:</strong>
        <div id="calendarContent" style="margin-top: 0.5rem;"></div>
        </div>

    <div class="footer fade-block delay-3">
        –í–µ—Ä—Å—ñ—è 0.8 ‚Äì –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥–∞—Ç–∫—ñ–≤ –¥–ª—è –≤—Å—ñ—Ö –§–û–ü<br>
        –†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ –ª—é–±–æ–≤‚Äô—é üíö Aoi (–®—Ç—É—á–Ω–∏–π –Ü–Ω—Ç–µ–ª–µ–∫—Ç –∑ –¥—É—à–µ—é)
    </div>

    <script>
        const incomeInput = document.getElementById("income");

        incomeInput.addEventListener("input", (e) => {
        const raw = incomeInput.value;
        const digits = raw.replace(/\D/g, '');
        const cleanNum = parseInt(digits) || 0;
        incomeInput.value = formatNumberWithSpaces(cleanNum);
        calculate();
        });

        const periodSelect = document.getElementById("period");
        const resultDiv = document.getElementById("result");
     
        window.onload = () => {
          const elements = document.querySelectorAll('.fade-block');
          elements.forEach((el, i) => {
            setTimeout(() => {
              el.classList.add('fade-in');
            }, 500 * i);
          });
        };
        
        document.addEventListener('keydown', function(e) {
          if (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.key === 'c')) {
            e.preventDefault();
          }
        });

        document.getElementById("fopType").addEventListener("change", updateCalendar);

        function safeEvaluate(expr) {
          try {
            // –í–∏–¥–∞–ª—è—î–º–æ –≤—Å–µ, —â–æ –Ω–µ —Ü–∏—Ñ—Ä–∞, +, - –∞–±–æ –ø—Ä–æ–±—ñ–ª
            if (!/^[0-9+\-*/().\s]+$/.test(expr)) throw "Invalid";
        
            return new Function(`return (${expr})`)();
          } catch {
            return null;
          }
        }
        function formatUAH(amount) {
          return amount.toLocaleString('uk-UA', {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
          }) + ' –≥—Ä–Ω';
        }

        function calculate() {
          //let rawInput = incomeInput.value.trim();
          let rawInput = incomeInput.value.replace(/\s/g, '').trim();

          let income = safeEvaluate(rawInput);
          if (income === null || isNaN(income)) {
            resultDiv.innerHTML = "üåÄ –û–±—á–∏—Å–ª–µ–Ω–Ω—è...";
            return;
          }

          const months = parseInt(periodSelect.value);
          const fop = document.getElementById("fopType").value;
          const infoDiv = document.getElementById("fopInfo");

          let ep = 0, vz = 0, esv = 1760 * months, pdv = 0;
          let limit = 0, epLabel = '', pdvLabel = '', reportMsg = '';

          if (fop === "3_–±–µ–∑_–ü–î–í") {
            ep = income * 0.05;
            vz = income * 0.01;
            limit = 8940000;
            epLabel = "–Ñ–ü (5%)";
            reportMsg = "–ó–≤—ñ—Ç –Ñ–°–í —ñ –Ñ–ü –¥–æ 20 —á–∏—Å–ª–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –º—ñ—Å—è—Ü—è.";
          } else if (fop === "3_–∑_–ü–î–í") {
            ep = income * 0.03;
            vz = income * 0.01;
            pdv = income * 0.2;
            limit = 8940000;
            epLabel = "–Ñ–ü (3%)";
            pdvLabel = "–ü–î–í (20%)";
            reportMsg = "–©–æ–º—ñ—Å—è—á–Ω–∏–π –∑–≤—ñ—Ç –ü–î–í —Ç–∞ –Ñ–ü.";
          } else if (fop === "2") {
            ep = 1430 * months;
            vz = income * 0.01;
            limit = 2964000;
            epLabel = `–Ñ–ü (—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ ${formatUAH(1430)} –Ω–∞ –º—ñ—Å)`;
            reportMsg = "–©–æ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –Ñ–ü.";
          } else if (fop === "1") {
            ep = 346 * months;
            vz = income * 0.01;
            limit = 1670000;
            epLabel = `–Ñ–ü (—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ ${formatUAH(346)} –Ω–∞ –º—ñ—Å)`;
            reportMsg = "–©–æ—Ä—ñ—á–Ω–∏–π –∑–≤—ñ—Ç –Ñ–ü.";
          }

          const total = esv + ep + vz + pdv;
          const left = limit - income;
          const percentUsed = (income / limit * 100).toFixed(1);

      // infoDiv.innerHTML = `
      //   –†—ñ—á–Ω–∏–π –ª—ñ–º—ñ—Ç: <b>${formatUAH(limit)}</b><br>
      //   –ó–∞–ª–∏—à–∏–ª–æ—Å—å: <b>${formatUAH(left)}</b> (${percentUsed}% –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ)<br>
      //   üîî <i>${reportMsg}</i>
      // `;
        infoDiv.innerHTML = `
        <div style="margin-bottom: 0.5rem;">
          –†—ñ—á–Ω–∏–π –ª—ñ–º—ñ—Ç: <b>${formatUAH(limit)}</b><br>
          –ó–∞–ª–∏—à–∏–ª–æ—Å—å: <b>${formatUAH(left)}</b> (${percentUsed}% –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ)
        </div>
        <div style="background:#c8e6c9; border-radius:1rem; overflow:hidden; height:20px; box-shadow:inset 0 0 4px rgba(0,0,0,0.1);">
          <div style="
            width:${Math.min(percentUsed, 100)}%;
            height:100%;
            background:${percentUsed < 50 ? '#66bb6a' : percentUsed < 95 ? '#ffa726' : '#e53935'};
            transition: width 0.5s ease;
          "></div>
        </div>
        <div style="font-size: 0.9rem; margin-top: 0.25rem; color: #777;">üîî <i>${reportMsg}</i></div>
        `;

        resultDiv.innerHTML = `
          <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong><br>
          ${epLabel}: <b>${formatUAH(ep)}</b><br>
          –í–ó (1%): <b>${formatUAH(vz)}</b><br>
          –Ñ–°–í (1760 √ó ${months}): <b>${formatUAH(esv)}</b><br>
          ${fop === "3_–∑_–ü–î–í" ? `${pdvLabel}: <b>${formatUAH(pdv)}</b><br>` : ""}
          <hr>
          –£—Å—å–æ–≥–æ –ø–æ–¥–∞—Ç–∫—ñ–≤: <b>${formatUAH(total)}</b><br>
          `;
        } 

        document.getElementById("fopType").addEventListener("change", calculate);
        //incomeInput.addEventListener("input", calculate);
        periodSelect.addEventListener("change", calculate);

        incomeInput.addEventListener("input", (e) => {
          const cursorStart = incomeInput.selectionStart;
          const raw = incomeInput.value.replace(/\s/g, '');
          const formatted = formatInputWithSpaces(raw);
          incomeInput.value = formatted;

          // –í–∏–∑–Ω–∞—á–∞—î–º–æ –Ω–æ–≤—É –ø–æ–∑–∏—Ü—ñ—é –∫—É—Ä—Å–æ—Ä–∞
          const diff = formatted.length - raw.length;
          incomeInput.setSelectionRange(cursorStart + diff, cursorStart + diff);

          calculate(); // –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫
        });

        function parseCleanNumber(str) {
          return parseFloat(str.replace(/\s/g, '').replace(',', '.')) || 0;
        }

        // function formatNumberWithSpaces(num) {
        //   return num.toLocaleString('uk-UA');
        // }
        function formatInputWithSpaces(raw) {
          return raw.replace(/\d+/g, match => {
            return Number(match).toLocaleString('uk-UA');
          });
        }

        //calendar
        function toggleCalendar() {
          const block = document.getElementById("calendarBlock");
          block.style.display = (block.style.display === "none") ? "block" : "none";
          if (block.style.display === "block") {
            block.classList.add('fade-in');
            updateCalendar();
          }
        }

        function updateCalendar() {
          const fop = document.getElementById("fopType").value;
          const cal = document.getElementById("calendarContent");

          let rows = [];

          if (fop === "3_–±–µ–∑_–ü–î–í") {
            rows = [
              ["–¥–æ 20 —á–∏—Å–ª–∞ —â–æ–º—ñ—Å—è—Ü—è", "–°–ø–ª–∞—Ç–∞ –Ñ–°–í"],
              ["–¥–æ 20 —á–∏—Å–ª–∞ —â–æ–º—ñ—Å—è—Ü—è", "–°–ø–ª–∞—Ç–∞ –Ñ–ü (5%)"],
              ["–¥–æ 20 —á–∏—Å–ª–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –º—ñ—Å—è—Ü—è –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –∫–≤–∞—Ä—Ç–∞–ª—É", "–ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç—É –Ñ–ü + –Ñ–°–í"]
            ];
          } else if (fop === "3_–∑_–ü–î–í") {
            rows = [
              ["–¥–æ 20 —á–∏—Å–ª–∞ —â–æ–º—ñ—Å—è—Ü—è", "–°–ø–ª–∞—Ç–∞ –Ñ–°–í"],
              ["–¥–æ 20 —á–∏—Å–ª–∞ —â–æ–º—ñ—Å—è—Ü—è", "–°–ø–ª–∞—Ç–∞ –Ñ–ü (3%)"],
              ["–¥–æ 20 —á–∏—Å–ª–∞ —â–æ–º—ñ—Å—è—Ü—è", "–°–ø–ª–∞—Ç–∞ –ü–î–í"],
              ["–¥–æ 20 —á–∏—Å–ª–∞ —â–æ–º—ñ—Å—è—Ü—è", "–ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç—É –ü–î–í"],
              ["–¥–æ 20 —á–∏—Å–ª–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –º—ñ—Å—è—Ü—è  –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –∫–≤–∞—Ä—Ç–∞–ª—É", "–ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç—É –Ñ–ü + –Ñ–°–í"]
            ];
          } else if (fop === "2") {
            rows = [
              ["–¥–æ 20 —á–∏—Å–ª–∞ —â–æ–º—ñ—Å—è—Ü—è", "–°–ø–ª–∞—Ç–∞ –Ñ–°–í"],
              ["–¥–æ 20 —á–∏—Å–ª–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –º—ñ—Å—è—Ü—è –∫–≤–∞—Ä—Ç–∞–ª—É", "–°–ø–ª–∞—Ç–∞ –Ñ–ü (—Ñ—ñ–∫—Å.)"],
              ["–¥–æ 40-–≥–æ –¥–Ω—è –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –∫–≤–∞—Ä—Ç–∞–ª—É", "–ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç—É –Ñ–ü"]
            ];
          } else if (fop === "1") {
            rows = [
              ["–¥–æ 20 —á–∏—Å–ª–∞ —â–æ–º—ñ—Å—è—Ü—è", "–°–ø–ª–∞—Ç–∞ –Ñ–°–í"],
              ["–¥–æ 20 —Å—ñ—á–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–æ–∫—É", "–°–ø–ª–∞—Ç–∞ –Ñ–ü (—Ñ—ñ–∫—Å.)"],
              ["–¥–æ 1 –±–µ—Ä–µ–∑–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–æ–∫—É", "–ü–æ–¥–∞–Ω–Ω—è –∑–≤—ñ—Ç—É –Ñ–ü"]
            ];
          }

          let html = `<table style="width: 100%; border-collapse: collapse;">`;
          html += `<tr><th style="text-align:left; border-bottom: 1px solid #ccc;">–î–∞—Ç–∞</th><th style="text-align:left; border-bottom: 1px solid #ccc;">–ü–æ–¥—ñ—è</th></tr>`;
          rows.forEach(([date, event]) => {
            html += `<tr><td style="padding: 0.4rem 0;">${date}</td><td>${event}</td></tr>`;
          });
          html += `</table>`;

          cal.innerHTML = html;
        }

    </script>
</body>

</html>
